<div class="card bg-white shadow-sm rounded-lg" *ngIf="!showForm">
    <app-dynamic-table [columns]="columns" [loading]="isLoading" [data]="data" [headerTitle]="'PARTY RATE LIST'"
        [rowActions]="actions" (onAction)="handleAction($event)">
    </app-dynamic-table>
</div>

<div class="min-h-screen p-4" *ngIf="showForm">
    <form [formGroup]="partyRateForm" (ngSubmit)="savePartyRate()"
        class="max-w-8xl mx-auto bg-white rounded-xl shadow-md overflow-hidden">
        <!-- Header -->
        <div class="bg-sky-600 px-6 py-4 rounded-t-lg flex justify-between items-center">
            <h1 class="text-2xl font-semibold text-white">{{heading}}</h1>
            <button type="button" class="text-white hover:text-gray-200 focus:outline-none" aria-label="Close"
                (click)="showForm = false">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                    </path>
                </svg>
            </button>
        </div>

        <!-- Main Form Content -->
        <div class="p-6 pb-0 grid grid-cols-1 lg:grid-cols-2 gap-8 bg-sky-200">
            <!-- Left Column -->
            <div class="space-y-6">
                <!-- Party Information Card -->
                <div class="bg-sky-100 p-5 rounded-lg border border-sky-400">
                    <h2 class="text-lg font-semibold text-slate-950 mb-4 pb-2 border-b border-sky-400">
                        <i class="pi pi-building mr-2 text-rose-900"></i>Party Details
                    </h2>
                    <div class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- Party Name Dropdown -->
                            <div>
                                <div class="flex items-center space-x-2">
                                    <i class="pi pi-users text-orange-600"></i>
                                    <label class="text-sm font-medium text-slate-950">Party Name</label>
                                </div>
                                <p-dropdown formControlName="party_id" [options]="partyName" optionLabel="party_name"
                                    optionValue="id" placeholder="Select Party"
                                    class="w-full border border-gray-300 rounded-lg">
                                </p-dropdown>
                            </div>

                            <!-- City Autocomplete -->
                            <div>
                                <div class="flex items-center space-x-2">
                                    <i class="pi pi-map-marker text-green-700"></i>
                                    <label class="block text-sm font-medium text-slate-950 mb-1">City</label>
                                </div>
                                <p-autoComplete formControlName="city_id" [suggestions]="filteredCities"
                                    (completeMethod)="filterCity($event)" field="CityName" [dropdown]="true"
                                    placeholder="Select City" class="w-full border border-gray-300 rounded-lg">
                                </p-autoComplete>
                            </div>
                        </div>
                        <div>
                            <div class="flex items-center space-x-2">
                                <i class="pi pi-home text-fuchsia-600"></i>
                                <label class="block text-sm font-medium text-slate-950 mb-1">Address</label>
                            </div>
                            <textarea formControlName="PartyAddr" pInputTextarea rows="3"
                                class="w-full border border-gray-300 rounded-lg p-3"
                                placeholder="Enter full address"></textarea>
                        </div>
                    </div>

                    <div>
                        <div class="flex items-center space-x-2">
                            <i class="pi pi-barcode text-green-700"></i>
                            <label class="block text-sm font-medium text-slate-950 mb-1">GST Number</label>
                        </div>
                        <input type="text" formControlName="GSTNo" pInputText
                            class="w-full border border-gray-300 rounded-lg p-3" placeholder="GSTIN">
                    </div>

                    <div class="space-y-4">
                        <div>
                            <div class="flex items-center space-x-2">
                                <i class="pi pi-map-marker text-fuchsia-500"></i>
                                <label class="block text-sm font-medium text-slate-950 mb-1">Pin Code</label>
                            </div>
                            <input type="number" formControlName="PinCode" pInputText
                                class="w-full border border-gray-300 rounded-lg p-3" placeholder="Postal code">
                        </div>
                    </div>
                </div>

            </div>

            <!-- Right Column -->
            <div class="space-y-6">
                <!-- Contact Information Card -->
                <div class="bg-sky-100 p-5 rounded-lg border border-sky-400">
                    <h2 class="text-lg font-semibold text-slate-950 mb-4 pb-2 border-b border-sky-400">
                        <i class="pi pi-phone mr-2 text-cyan-600"></i>Contact Information
                    </h2>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <div class="flex items-center space-x-2">
                                <i class="pi pi-user text-green-700"></i>
                                <label class="block text-sm font-medium text-slate-950 mb-1">Contact Person</label>
                            </div>
                            <input type="text" formControlName="ContactPersonName" pInputText
                                class="w-full border border-gray-300 rounded-lg p-3" placeholder="Name">
                        </div>
                        <div>
                            <div class="flex items-center space-x-2">
                                <i class="pi pi-mobile text-red-700"></i>
                                <label class="block text-sm font-medium text-slate-950 mb-1">Contact Number</label>
                            </div>
                            <input type="number" formControlName="ContactNo" pInputText
                                class="w-full border border-gray-300 rounded-lg p-3" placeholder="Phone number">
                        </div>
                    </div>
                    <div class="mt-4">
                        <div class="flex items-center space-x-2">
                            <i class="pi pi-envelope text-yellow-500"></i>
                            <label class="block text-sm font-medium text-slate-950 mb-1">Email Address</label>
                        </div>
                        <input type="email" formControlName="EMailID" pInputText
                            class="w-full border border-gray-300 rounded-lg p-3" placeholder="email@example.com">
                    </div>
                </div>
            </div>
        </div>

        <!--View Option Button-->
        <div class="p-4 flex flex-col gap-4 bg-sky-200">
            <!-- Rate Type Selection Button -->
            <div class="flex justify-end items-end">
                <button pButton type="button" icon="pi pi-plus" label="Add Rate Type"
                    class="p-button-success p-button-rounded shadow-md" (click)="viewOption()"></button>
            </div>

            <!-- Tab View Container -->
            <p-tabView (onChange)="onTabChange($event)" class="custom-tabview">
                <p-tabPanel *ngFor="let rate of rateTypes" [header]="rate.label">
                    <!-- Preview Card -->
                    <div class="bg-white rounded-xl border border-gray-200 shadow-lg overflow-hidden">
                        <!-- Preview Header -->
                        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-4 border-b">
                            <h3 class="text-xl sm:text-2xl font-bold text-gray-800 flex items-center gap-2">
                                <i class="pi pi-eye"></i>
                                {{ rate.label }} Rates Preview
                            </h3>
                        </div>

                        <!-- Preview Content -->
                        <div class="p-4">
                            <!-- âœ… Normal Rate Table -->
                            <p-table *ngIf="filteredData.length > 0 && selectedRateType === 'Normal'; else checkOther"
                                [value]="filteredData" [paginator]="true" [rows]="5"
                                class="p-datatable-striped p-datatable-sm shadow-sm rounded-lg">
                                <ng-template pTemplate="header">
                                    <tr class="bg-gray-100">
                                        <th class="font-semibold">Car Type</th>
                                        <th class="font-semibold">Hours Rate</th>
                                        <th class="font-semibold">KM Rate</th>
                                        <th class="font-semibold">Min HRS</th>
                                        <th class="font-semibold">Min KM</th>
                                        <th class="font-semibold">Include Tax</th>
                                        <th class="font-semibold">Effect Date</th>
                                        <th class="font-semibold">Night Halt</th>
                                        <th class="font-semibold">Early Halt</th>
                                        <th class="font-semibold">Actions</th>
                                    </tr>
                                </ng-template>

                                <ng-template pTemplate="body" let-row let-i="rowIndex">
                                    <tr class="hover:bg-blue-50 transition-colors">
                                        <td class="font-medium">{{ row.car_type }}</td>
                                        <td>{{ row.Hours | currency:'INR' }}</td>
                                        <td>{{ row.KM | currency:'INR' }}</td>
                                        <td>{{ row.MinHr || '-' }}</td>
                                        <td>{{ row.MinKm || '-' }}</td>
                                        <td>
                                            <span [class]="row.IncludeTax === 'Y' ? 'badge-success' : 'badge-warning'">
                                                {{ row.IncludeTax === 'Y' ? 'Yes' : 'No' }}
                                            </span>
                                        </td>
                                        <td>{{ row.RtEfDate | date }}</td>
                                        <td>
                                            <span *ngIf="row.NHTime">{{ row.NHTime }} - {{ row.NHAmount | currency:'INR'
                                                }}</span>
                                            <span *ngIf="!row.NHTime">-</span>
                                        </td>
                                        <td>
                                            <span *ngIf="row.EHTime">{{ row.EHTime }} - {{ row.EHAmount | currency:'INR'
                                                }}</span>
                                            <span *ngIf="!row.EHTime">-</span>
                                        </td>
                                        <td class="flex gap-1">
                                            <button pButton type="button" icon="pi pi-pencil"
                                                class="p-button-sm p-button-rounded p-button-outlined p-button-warning"
                                                (click)="onEditRow(row)">
                                            </button>

                                            <button pButton type="button" icon="pi pi-trash"
                                                class="p-button-sm p-button-rounded p-button-outlined p-button-danger"
                                                (click)="onDeleteRow(row)">
                                            </button>
                                        </td>
                                    </tr>
                                </ng-template>
                            </p-table>

                            <!-- âœ… Day/KM Table -->
                            <ng-template #checkOther>
                                <p-table
                                    *ngIf="filteredData.length > 0 && selectedRateType === 'DayKM'; else checkHrsKm"
                                    [value]="filteredData" [paginator]="true" [rows]="5"
                                    class="p-datatable-striped p-datatable-sm shadow-sm rounded-lg">
                                    <ng-template pTemplate="header">
                                        <tr class="bg-gray-100">
                                            <th class="font-semibold">Car Type</th>
                                            <th class="font-semibold">KM</th>
                                            <th class="font-semibold">Amount</th>
                                            <th class="font-semibold">Extra KM Rate</th>
                                            <th class="font-semibold">Effect Date</th>
                                            <th class="font-semibold">Include Tax</th>
                                            <th class="font-semibold">Night Halt</th>
                                            <th class="font-semibold">Early Halt</th>
                                            <th class="font-semibold">Actions</th>
                                        </tr>
                                    </ng-template>

                                    <ng-template pTemplate="body" let-row let-i="rowIndex">
                                        <tr class="hover:bg-blue-50 transition-colors">
                                            <td class="font-medium">{{ row.car_type }}</td>
                                            <td>{{ row.KM }}</td>
                                            <td>{{ row.Amount | currency:'INR' }}</td>
                                            <td>{{ row.ExtKmrate | currency:'INR' }}</td>
                                            <td>{{ row.RtEfDate | date }}</td>
                                            <td>
                                                <span
                                                    [class]="row.IncludeTax === 'Y' ? 'badge-success' : 'badge-warning'">
                                                    {{ row.IncludeTax === 'Y' ? 'Yes' : 'No' }}
                                                </span>
                                            </td>
                                            <td>
                                                <span *ngIf="row.NHTime">{{ row.NHTime }} - {{ row.NHAmount |
                                                    currency:'INR' }}</span>
                                                <span *ngIf="!row.NHTime">-</span>
                                            </td>
                                            <td>
                                                <span *ngIf="row.EHTime">{{ row.EHTime }} - {{ row.EHAmount |
                                                    currency:'INR' }}</span>
                                                <span *ngIf="!row.EHTime">-</span>
                                            </td>
                                            <td class="flex gap-1">
                                                <button pButton type="button" icon="pi pi-pencil"
                                                    class="p-button-sm p-button-rounded p-button-outlined p-button-warning"
                                                    (click)="onEditRow(row)">
                                                </button>

                                                <button pButton type="button" icon="pi pi-trash"
                                                    class="p-button-sm p-button-rounded p-button-outlined p-button-danger"
                                                    (click)="onDeleteRow(row)">
                                                </button>
                                            </td>
                                        </tr>
                                    </ng-template>
                                </p-table>
                            </ng-template>

                            <!-- âœ… HRS/KM Slab Table -->
                            <ng-template #checkHrsKm>
                                <p-table
                                    *ngIf="filteredData.length > 0 && selectedRateType === 'Hrs'; else checkTransfer"
                                    [value]="filteredData" [paginator]="true" [rows]="5"
                                    class="p-datatable-striped p-datatable-sm shadow-sm rounded-lg">
                                    <ng-template pTemplate="header">
                                        <tr class="bg-gray-100">
                                            <th class="font-semibold">Car Type</th>
                                            <th class="font-semibold">Hours</th>
                                            <th class="font-semibold">KM</th>
                                            <th class="font-semibold">Amount</th>
                                            <th class="font-semibold">Extra Rates</th>
                                            <th class="font-semibold">Higher Rate</th>
                                            <th class="font-semibold">Include Tax</th>
                                            <th class="font-semibold">Effect Date</th>
                                            <th class="font-semibold">Halt Details</th>
                                            <th class="font-semibold">Actions</th>
                                        </tr>
                                    </ng-template>

                                    <ng-template pTemplate="body" let-row let-i="rowIndex">
                                        <tr class="hover:bg-blue-50 transition-colors">
                                            <td class="font-medium">{{ row.car_type }}</td>
                                            <td>{{ row.Hours }}</td>
                                            <td>{{ row.KM }}</td>
                                            <td>{{ row.Amount | currency:'INR' }}</td>
                                            <td>
                                                <div class="text-xs">
                                                    <div>Hrs: {{ row.ExtHrrate | currency:'INR' }}</div>
                                                    <div>KM: {{ row.ExtKmrate | currency:'INR' }}</div>
                                                </div>
                                            </td>
                                            <td>
                                                <span [class]="row.HigherRate ? 'badge-info' : 'badge-secondary'">
                                                    {{ row.HigherRate ? 'Yes' : 'No' }}
                                                </span>
                                            </td>
                                            <td>
                                                <span
                                                    [class]="row.IncludeTax === 'Y' ? 'badge-success' : 'badge-warning'">
                                                    {{ row.IncludeTax === 'Y' ? 'Yes' : 'No' }}
                                                </span>
                                            </td>
                                            <td>{{ row.RtEfDate | date }}</td>
                                            <td>
                                                <div class="text-xs">
                                                    <div>Night: {{ row.NHTime || '-' }} - {{ row.NHAmount |
                                                        currency:'INR' }}</div>
                                                    <div>Early: {{ row.EHTime || '-' }} - {{ row.EHAmount |
                                                        currency:'INR' }}</div>
                                                </div>
                                            </td>

                                            <td class="flex gap-1">
                                                <button pButton type="button" icon="pi pi-pencil"
                                                    class="p-button-sm p-button-rounded p-button-outlined p-button-warning"
                                                    (click)="onEditRow(row)">
                                                </button>

                                                <button pButton type="button" icon="pi pi-trash"
                                                    class="p-button-sm p-button-rounded p-button-outlined p-button-danger"
                                                    (click)="onDeleteRow(row)">
                                                </button>
                                            </td>
                                        </tr>
                                    </ng-template>
                                </p-table>
                            </ng-template>

                            <!-- âœ… Transfer Table -->
                            <ng-template #checkTransfer>
                                <p-table *ngIf="filteredData.length > 0 && selectedRateType === 'Trn'; else noData"
                                    [value]="filteredData" [paginator]="true" [rows]="5"
                                    class="p-datatable-striped p-datatable-sm shadow-sm rounded-lg">
                                    <ng-template pTemplate="header">
                                        <tr class="bg-gray-100">
                                            <th class="font-semibold">Car Type</th>
                                            <th class="font-semibold">Transfer Type</th>
                                            <th class="font-semibold">Amount</th>
                                            <th class="font-semibold">Effect Date</th>
                                            <th class="font-semibold">Include Tax</th>
                                            <th class="font-semibold">Actions</th>
                                        </tr>
                                    </ng-template>

                                    <ng-template pTemplate="body" let-row let-i="rowIndex">
                                        <tr class="hover:bg-blue-50 transition-colors">
                                            <td class="font-medium">{{ row.car_type }}</td>
                                            <td>
                                                <span>
                                                    {{ row.TransType }}
                                                </span>
                                            </td>
                                            <td>{{ row.Amount | currency:'INR' }}</td>
                                            <td>{{ row.RtEfDate | date }}</td>
                                            <td>
                                                <span
                                                    [class]="row.IncludeTax === 'Y' ? 'badge-success' : 'badge-warning'">
                                                    {{ row.IncludeTax === 'Y' ? 'Yes' : 'No' }}
                                                </span>
                                            </td>
                                            <td class="flex gap-1">
                                                <button pButton type="button" icon="pi pi-pencil"
                                                    class="p-button-sm p-button-rounded p-button-outlined p-button-warning"
                                                    (click)="onEditRow(row)">
                                                </button>

                                                <button pButton type="button" icon="pi pi-trash"
                                                    class="p-button-sm p-button-rounded p-button-outlined p-button-danger"
                                                    (click)="onDeleteRow(row)">
                                                </button>
                                            </td>

                                        </tr>
                                    </ng-template>
                                </p-table>
                            </ng-template>

                            <!-- No Data Template -->
                            <ng-template #noData>
                                <div class="flex flex-col items-center justify-center p-8 text-center text-gray-500">
                                    <i class="pi pi-database text-4xl mb-4 text-gray-300"></i>
                                    <p class="text-lg">No records found for {{ rate.label }} rates</p>
                                    <p class="text-sm">Click the "Select Rate Type" button to add new rates</p>
                                </div>
                            </ng-template>
                        </div>
                    </div>
                </p-tabPanel>
            </p-tabView>
        </div>

        <!-- Footer with Submit Button -->
        <div class="bg-sky-400 px-6 py-4 border-t border-gray-200 flex justify-end">
            <button type="submit"
                class="px-6 py-3 bg-sky-600 text-white font-medium rounded-lg shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors">
                Save Party Information
            </button>
        </div>
    </form>
</div>




<!--Show Options-->
<p-dialog header="Select Rate Type" [(visible)]="showOption" [modal]="true" [style]="{ width: '1200px' }"
    [closable]="true" [dismissableMask]="false" [breakpoints]="{ '960px': '120vw', '640px': '100vw' }"
    styleClass="custom-dialog p-0 overflow-hidden rounded-xl shadow-lg">
    <form [formGroup]="form" (ngSubmit)="onFloatingFormSubmit()" class="p-4 space-y-6 bg-white">

        <!-- Rate Type -->
        <div>
            <div class="flex items-center space-x-2 mb-2">
                <i class="pi pi-users text-sky-600"></i>
                <label class="text-sm font-semibold text-gray-800">Rate Type</label>
            </div>
            <p-dropdown formControlName="TabVal" [options]="rateTypes" optionLabel="label" optionValue="value"
                placeholder="Select Rate Type" appendTo="body" class="w-full"></p-dropdown>
        </div>

        <!-- Common Fields -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <!-- Car Type -->
            <div>
                <label class="flex items-center gap-2 text-sm font-semibold text-gray-700 mb-1">
                    <i class="pi pi-car text-sky-600"></i> Car Type
                </label>
                <p-dropdown [options]="carTypes" formControlName="car_type" optionLabel="car_type" optionValue="id"
                    placeholder="Select Car" appendTo="body" class="w-full"></p-dropdown>
            </div>

            <!-- Include Tax -->
            <div>
                <label class="flex items-center gap-2 text-sm font-semibold text-gray-700 mb-1">
                    <i class="pi pi-check-circle text-sky-600"></i> Include Tax
                </label>
                <p-dropdown [options]="includeTaxOptions" formControlName="IncludeTax" placeholder="Include Tax"
                    class="w-full"></p-dropdown>
            </div>

            <!-- Effect Date -->
            <div>
                <label class="flex items-center gap-2 text-sm font-semibold text-gray-700 mb-1">
                    <i class="pi pi-calendar text-sky-600"></i> Effect Date
                </label>
                <p-calendar formControlName="RtEfDate" size="large" dateFormat="dd/mm/yy" placeholder="dd/mm/yyyy"
                    appendTo="body" class="w-full"></p-calendar>
            </div>
        </div>

        <!-- Normal Rate Type Fields -->
        <ng-container *ngIf="form.get('TabVal')?.value === 'Normal'">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <div *ngFor="let field of [
          { icon: 'pi pi-clock', label: 'Hour Rate', control: 'Hours', placeholder: 'Hour Rate' },
          { icon: 'pi pi-arrow-up', label: 'KM Rate', control: 'KM', placeholder: 'KM Rate' },
          { icon: 'pi pi-clock', label: 'Min Hrs', control: 'MinHr', placeholder: 'Min Hrs' },
          { icon: 'pi pi-map-marker', label: 'Min KM', control: 'MinKm', placeholder: 'Min KM' }
        ]">
                    <label class="flex items-center gap-2 text-sm font-semibold text-gray-700 mb-1">
                        <i class="{{field.icon}} text-sky-600"></i> {{field.label}}
                    </label>
                    <input pInputText [formControlName]="field.control" [placeholder]="field.placeholder"
                        class="w-full" />
                </div>
            </div>

            <!-- Night/Early Halt -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <div *ngFor="let field of [
          { icon: 'pi pi-moon', label: 'Night Halt Time', control: 'NHTime' },
          { icon: 'pi pi-dollar', label: 'Night Halt Amount', control: 'NHAmount' },
          { icon: 'pi pi-history', label: 'Early Halt Time', control: 'EHTime' },
          { icon: 'pi pi-dollar', label: 'Early Halt Amount', control: 'EHAmount' }
        ]">
                    <label class="flex items-center gap-2 text-sm font-semibold text-gray-700 mb-1">
                        <i class="{{field.icon}} text-sky-600"></i> {{field.label}}
                    </label>
                    <input pInputText [formControlName]="field.control" [placeholder]="field.label" class="w-full" />
                </div>
            </div>
        </ng-container>

        <!-- HRS/KM Slab -->
        <ng-container *ngIf="form.get('TabVal')?.value === 'Hrs'">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <div *ngFor="let field of [
          { icon: 'pi pi-clock', label: 'Hours', control: 'Hours' },
          { icon: 'pi pi-arrow-up', label: 'KM', control: 'KM' },
          { icon: 'pi pi-dollar', label: 'Amount', control: 'Amount' },
          { icon: 'pi pi-calendar', label: 'Extra Hours Rate', control: 'ExtHrrate' }
        ]">
                    <label class="flex items-center gap-2 text-sm font-semibold text-gray-700 mb-1">
                        <i class="{{field.icon}} text-sky-600"></i> {{field.label}}
                    </label>
                    <input pInputText [formControlName]="field.control" class="w-full" />
                </div>
            </div>

            <!-- Extra KM + Whichever Higher -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="flex items-center gap-2 text-sm font-semibold text-gray-700 mb-1">
                        <i class="pi pi-map-marker text-sky-600"></i> Extra KM Rate
                    </label>
                    <input pInputText formControlName="ExtKmrate" class="w-full" />
                </div>
                <div class="flex items-center gap-2 mt-6">
                    <i class="pi pi-chart-bar text-sky-600"></i>
                    <label class="text-sm font-semibold text-gray-700">Whichever Higher</label>
                    <p-checkbox formControlName="HigherRate" binary="true"></p-checkbox>
                </div>
            </div>
        </ng-container>

        <!-- Day/KM -->
        <ng-container *ngIf="form.get('TabVal')?.value === 'DayKM'">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div *ngFor="let field of [
          { icon: 'pi pi-arrow-up', label: 'KM', control: 'KM' },
          { icon: 'pi pi-dollar', label: 'Amount', control: 'Amount' },
          { icon: 'pi pi-calendar', label: 'Extra KM Rate', control: 'ExtKmrate' }
        ]">
                    <label class="flex items-center gap-2 text-sm font-semibold text-gray-700 mb-1">
                        <i class="{{field.icon}} text-sky-600"></i> {{field.label}}
                    </label>
                    <input pInputText [formControlName]="field.control" class="w-full" />
                </div>
            </div>
        </ng-container>

        <!-- Transfer -->
        <ng-container *ngIf="form.get('TabVal')?.value === 'Trn'">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="flex items-center gap-2 text-sm font-semibold text-gray-700 mb-1">
                        <i class="pi pi-refresh text-sky-600"></i> Transfer Type
                    </label>
                    <p-dropdown formControlName="TransType" [options]="transferTypes" optionLabel="label"
                        optionValue="value" placeholder="Select Transfer Type" appendTo="body"
                        class="w-full"></p-dropdown>
                </div>
                <div>
                    <label class="flex items-center gap-2 text-sm font-semibold text-gray-700 mb-1">
                        <i class="pi pi-dollar text-sky-600"></i> Amount
                    </label>
                    <input pInputText formControlName="Amount" class="w-full" />
                </div>
            </div>
        </ng-container>

        <!-- Footer Buttons -->
        <div class="flex justify-end gap-3 pt-4 border-t border-gray-200">
            <button pButton type="button" label="Cancel" class="p-button-secondary p-button-outlined"
                (click)="showOption = false"></button>
            <button pButton type="submit" label="Save" class="p-button-success"></button>
        </div>

    </form>
</p-dialog>