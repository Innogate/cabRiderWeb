<div class="p-6 m-6 rounded-2xl  border border-blue-300 shadow-lg bg-gradient-to-r from-white to-blue-50">
  <!-- ðŸ“„ Header -->
  <div class="flex items-center justify-between mb-8">
    <div class="flex items-center gap-4">
      <span class="bg-blue-200 text-blue-800 rounded-full p-3 shadow-md">
        <i class="pi pi-calendar-plus text-2xl"></i>
      </span>
      <h2 class="text-3xl md:text-4xl font-extrabold text-blue-600 m-0">Add Invoice</h2>
    </div>
  </div>

  <!-- ðŸ§¾ Form -->
<form [formGroup]="invoiceForm" class="p-8 bg-white rounded-2xl border">

  <!-- Company Info -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
    <div>
      <label class="block text-gray-700 font-semibold mb-1">
        <i class="pi pi-building text-blue-500 mr-2"></i>Select Company
      </label>
      <p-dropdown
        formControlName="company"
        [options]="companies"
        placeholder="Select Company"
        class="w-full"
      ></p-dropdown>
    </div>

    <div>
      <label class="block text-gray-700 font-semibold mb-1">
        <i class="pi pi-sitemap text-purple-500 mr-2"></i>Select Branch
      </label>
      <p-dropdown
        formControlName="branch"
        [options]="branches"
        placeholder="Select Branch"
        class="w-full"
      ></p-dropdown>
    </div>

    <div>
      <label class="block text-gray-700 font-semibold mb-1">
        <i class="pi pi-users text-green-500 mr-2"></i>Select Party
      </label>
      <p-dropdown
        formControlName="party"
        [options]="parties"
        placeholder="Select Party"
        class="w-full"
      ></p-dropdown>
    </div>

    <div>
      <label class="block text-gray-700 font-semibold mb-1">
        <i class="pi pi-map-marker text-red-500 mr-2"></i>Select City
      </label>
      <p-dropdown
        formControlName="city"
        [options]="cities"
        placeholder="Select City"
        class="w-full"
      ></p-dropdown>
    </div>

    <div>
      <label class="block text-gray-700 font-semibold mb-1">
        <i class="pi pi-tag text-yellow-500 mr-2"></i>Bill No
      </label>
      <input
        type="text"
        pInputText
        formControlName="billNo"
        class="w-full bg-gray-50"
        readonly
      />
    </div>

    <div>
      <label class="block text-gray-700 font-semibold mb-1">
        <i class="pi pi-calendar text-indigo-500 mr-2"></i>Bill Date
      </label>
      <p-calendar
        formControlName="billDate"
        dateFormat="dd/mm/yy"
        class="w-full"
      ></p-calendar>
    </div>
  </div>

  <!-- Tax Type & RCM & Add Duty -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-end mb-4">
    <!-- Tax Type -->
    <div>
      <label class="block font-semibold text-gray-700 mb-2">
        <i class="pi pi-percentage text-pink-500 mr-2"></i>Tax Type
      </label>
      <div class="flex gap-6 items-center">
        <p-radioButton inputId="cgst" name="taxType" value="cgst" formControlName="taxType"></p-radioButton>
        <label for="cgst" class="text-gray-600">CGST/SGST</label>

        <p-radioButton inputId="igst" name="taxType" value="igst" formControlName="taxType"></p-radioButton>
        <label for="igst" class="text-gray-600">IGST</label>
      </div>
    </div>

    <!-- RCM + Add Duty -->
    <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-6">
      <div>
        <label class="block font-semibold text-gray-700 mb-2">
          <i class="pi pi-briefcase text-orange-500 mr-2"></i>RCM
        </label>
        <div class="flex gap-6 items-center">
          <p-radioButton inputId="rcmNo" name="rcm" value="no" formControlName="rcm"></p-radioButton>
          <label for="rcmNo" class="text-gray-600">No</label>

          <p-radioButton inputId="rcmYes" name="rcm" value="yes" formControlName="rcm"></p-radioButton>
          <label for="rcmYes" class="text-gray-600">Yes</label>
        </div>
      </div>

      <!-- Add Duty Button -->
      <div class="self-end">
        <button
          pButton
          type="button"
          icon="pi pi-plus-circle"
          label="Add Duty"
          class="p-button-success px-4 py-2 text-base shadow-md hover:scale-105 transition-transform"
          (click)="displayDuty = true"
        ></button>
      </div>
    </div>
  </div>
</form>


  <!-- ðŸ“‹ Table -->
  <div class=" p-4 rounded-xl bg-white mt-6 border ">
    <p-table
      [value]="invoices"
      [paginator]="true"
      [rows]="10"
      [responsiveLayout]="'scroll'"
      [resizableColumns]="true"
      [showCurrentPageReport]="true"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
      class="p-datatable-gridlines rounded-xl"
    >
      <ng-template pTemplate="header">
        <tr class=" bg-blue-500 text-gray-800 text-sm font-semibold">
          <th class="py-3 px-4"><i class="pi pi-sort-numeric-up text-blue-500 mr-1"></i> SI No.</th>
          <th class="py-3 px-4"><i class="pi pi-id-card text-green-600 mr-1"></i> Slip No.</th>
          <th class="py-3 px-4"><i class="pi pi-briefcase text-purple-600 mr-1"></i> Duty Type</th>
          <th class="py-3 px-4"><i class="pi pi-car text-orange-500 mr-1"></i> Car No.</th>
          <th class="py-3 px-4"><i class="pi pi-cog text-gray-700 mr-1"></i> Car Type</th>
          <th class="py-3 px-4"><i class="pi pi-building text-pink-600 mr-1"></i> Project</th>
          <th class="py-3 px-4"><i class="pi pi-user text-indigo-600 mr-1"></i> Guest Name</th>
          <th class="py-3 px-4"><i class="pi pi-calendar text-teal-600 mr-1"></i> From Date</th>
          <th class="py-3 px-4"><i class="pi pi-calendar-times text-red-600 mr-1"></i> To Date</th>
          <th class="py-3 px-4"><i class="pi pi-clock text-yellow-600 mr-1"></i> From Time</th>
          <th class="py-3 px-4"><i class="pi pi-clock text-yellow-700 mr-1"></i> To Time</th>
          <th class="py-3 px-4"><i class="pi pi-directions text-blue-700 mr-1"></i> From KM</th>
          <th class="py-3 px-4"><i class="pi pi-directions-alt text-blue-800 mr-1"></i> To KM</th>
          <th class="py-3 px-4"><i class="pi pi-stopwatch text-lime-600 mr-1"></i> Total Time</th>
          <th class="py-3 px-4"><i class="pi pi-compass text-cyan-600 mr-1"></i> Total KM</th>
          <th class="py-3 px-4"><i class="pi pi-cog text-red-500 mr-1"></i> Action</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-invoice>
        <tr class="hover:bg-blue-50 transition-all text-sm">
          <td class="py-2 px-3">{{ invoice.siNo }}</td>
          <td class="py-2 px-3">{{ invoice.slipNo }}</td>
          <td class="py-2 px-3">{{ invoice.dutyType }}</td>
          <td class="py-2 px-3">{{ invoice.carNo }}</td>
          <td class="py-2 px-3">{{ invoice.carType }}</td>
          <td class="py-2 px-3">{{ invoice.project }}</td>
          <td class="py-2 px-3">{{ invoice.guestName }}</td>
          <td class="py-2 px-3">{{ invoice.fromDate }}</td>
          <td class="py-2 px-3">{{ invoice.toDate }}</td>
          <td class="py-2 px-3">{{ invoice.fromTime }}</td>
          <td class="py-2 px-3">{{ invoice.toTime }}</td>
          <td class="py-2 px-3">{{ invoice.fromKm }}</td>
          <td class="py-2 px-3">{{ invoice.toKm }}</td>
          <td class="py-2 px-3">{{ invoice.totalTime }}</td>
          <td class="py-2 px-3">{{ invoice.totalKm }}</td>
          <td class="py-2 px-3">
            <div class="flex gap-2 justify-center">
              <button pButton icon="pi pi-pencil" class="p-button-sm p-button-warning p-button-rounded" pTooltip="Edit"></button>
              <button pButton icon="pi pi-trash" class="p-button-sm p-button-danger p-button-rounded" pTooltip="Delete"></button>
              <button pButton icon="pi pi-print" class="p-button-sm p-button-info p-button-rounded" pTooltip="Print"></button>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>

  <!-- âœ… Save Button -->
  <div class="text-right mt-6">
    <button pButton type="button" icon="pi pi-save" label="Save" class="p-button-primary px-6 py-2" (click)="save()"></button>
  </div>
</div>




<!-- Add duty -->

<p-dialog
  [(visible)]="displayDuty"
  [modal]="true"
  [style]="{ width: '90vw' }"
  [breakpoints]="{ '960px': '95vw', '640px': '100vw' }"
  [closable]="true"
  [dismissableMask]="true"
  [contentStyle]="{ padding: '0' }"
>

<ng-template pTemplate="header">
    <div class="flex items-center gap-3 text-blue-700 font-extrabold text-xl">
      <span
        class="w-10 h-10 bg-blue-200 rounded-full flex items-center justify-center shadow-sm"
      >
        <i class="pi pi-calendar-plus text-lg"></i>
      </span>
      <span>Add Duty</span>
    </div>
  </ng-template>

  <div class="p-4 bg-gradient-to-br from-white via-sky-50 to-blue-50 rounded-xl">

    <!-- ðŸ” Filter Section -->
    <div class="bg-white p-4 rounded-xl border flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-5">

      <!-- Show Dropdown -->
      <div class="flex items-center gap-3 w-full md:w-auto">
        <i class="pi pi-eye text-blue-600 text-lg"></i>
        <label class="font-semibold text-gray-700 whitespace-nowrap">Show:</label>
        <p-dropdown
          [options]="show"
          [(ngModel)]="selectedShow"
          placeholder="Show"
          [showClear]="true"
          class="w-full min-w-[200px]"
        ></p-dropdown>
      </div>

      <!-- Search Field + Button -->
      <div class="flex items-center gap-3 w-full md:w-auto max-w-md">
        <i class="pi pi-search text-blue-600 text-lg"></i>
        <span class="p-input-icon-left w-full">
          <input
            pInputText
            type="text"
            placeholder="Search Invoices..."
            class="w-full border border-blue-200 focus:ring-2 focus:ring-blue-400 rounded-lg"
            [(ngModel)]="searchText"
          />
        </span>
        <button
          pButton
          type="button"
          icon="pi pi-search"
          class="p-button-info p-button-rounded px-4 py-3 text-base hover:scale-105 transition-transform shadow-md"
          (click)="searchInvoices()"
        ></button>
      </div>
    </div>

    <!-- ðŸ“‹ Table Section -->
    <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-lg">
      <p-table
        [value]="invoices"
        [paginator]="true"
        [rows]="10"
        [responsiveLayout]="'scroll'"
        [resizableColumns]="true"
        [showCurrentPageReport]="true"
        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
        class="p-datatable-gridlines rounded-xl"
      >
        <!-- Table Header -->
        <ng-template pTemplate="header">
          <tr class="bg-blue-100 text-gray-800 text-sm font-semibold">
            <th class="py-2 px-3"><i class="pi pi-check-square text-blue-500"></i></th>
            <th class="py-2 px-3"><i class="pi pi-sort-numeric-up text-cyan-600 mr-1"></i> SI No.</th>
            <th class="py-2 px-3"><i class="pi pi-id-card text-green-600 mr-1"></i> Slip No.</th>
            <th class="py-2 px-3"><i class="pi pi-briefcase text-indigo-600 mr-1"></i> Duty Type</th>
            <th class="py-2 px-3"><i class="pi pi-car text-orange-500 mr-1"></i> Car No.</th>
            <th class="py-2 px-3"><i class="pi pi-cog text-gray-700 mr-1"></i> Car Type</th>
            <th class="py-2 px-3"><i class="pi pi-building text-pink-600 mr-1"></i> Project</th>
            <th class="py-2 px-3"><i class="pi pi-user text-purple-600 mr-1"></i> Guest Name</th>
            <th class="py-2 px-3"><i class="pi pi-calendar text-teal-600 mr-1"></i> From Date</th>
            <th class="py-2 px-3"><i class="pi pi-calendar text-red-600 mr-1"></i> To Date</th>
            <th class="py-2 px-3"><i class="pi pi-clock text-yellow-600 mr-1"></i> From Time</th>
            <th class="py-2 px-3"><i class="pi pi-clock text-yellow-600 mr-1"></i> To Time</th>
            <th class="py-2 px-3"><i class="pi pi-directions text-gray-600 mr-1"></i> From KM</th>
            <th class="py-2 px-3"><i class="pi pi-directions-alt text-gray-600 mr-1"></i> To KM</th>
            <th class="py-2 px-3"><i class="pi pi-stopwatch text-lime-600 mr-1"></i> Total Time</th>
            <th class="py-2 px-3"><i class="pi pi-compass text-lime-600 mr-1"></i> Total KM</th>
            <th class="py-2 px-3"><i class="pi pi-wallet text-emerald-600 mr-1"></i> Net Amount</th>
          </tr>
        </ng-template>

        <!-- Table Body -->
        <ng-template pTemplate="body" let-invoice>
          <tr class="hover:bg-blue-50 transition-all text-sm">
            <td class="py-2 px-3">
              <input type="checkbox" [(ngModel)]="invoice.selected" />
            </td>
            <td class="py-2 px-3">{{ invoice.siNo }}</td>
            <td class="py-2 px-3">{{ invoice.slipNo }}</td>
            <td class="py-2 px-3">{{ invoice.dutyType }}</td>
            <td class="py-2 px-3">{{ invoice.carNo }}</td>
            <td class="py-2 px-3">{{ invoice.carType }}</td>
            <td class="py-2 px-3">{{ invoice.project }}</td>
            <td class="py-2 px-3">{{ invoice.guestName }}</td>
            <td class="py-2 px-3">{{ invoice.fromDate }}</td>
            <td class="py-2 px-3">{{ invoice.toDate }}</td>
            <td class="py-2 px-3">{{ invoice.fromTime }}</td>
            <td class="py-2 px-3">{{ invoice.toTime }}</td>
            <td class="py-2 px-3">{{ invoice.fromKm }}</td>
            <td class="py-2 px-3">{{ invoice.toKm }}</td>
            <td class="py-2 px-3">{{ invoice.totalTime }}</td>
            <td class="py-2 px-3">{{ invoice.totalKm }}</td>
            <td class="py-2 px-3 font-semibold text-right text-green-600">
              â‚¹{{ invoice.netAmount | number: '1.2-2' }}
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  <div class="flex justify-end gap-3 mt-6">
  <!-- Save Button -->
  <button
    pButton
    type="button"
    icon="pi pi-save"
    class="p-button-primary"
  >
    Save
  </button>

  <!-- Creative Close Button -->
  <button
  pButton
  type="button"
  icon="pi pi-times"
  label="Close"
  class="p-button-danger"
  (click)="displayDuty = false"
></button>

</div>

  </div>
</p-dialog>


